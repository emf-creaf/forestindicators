<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Indicator estimation procedures • forestindicators</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Indicator estimation procedures">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">forestindicators</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/IndicatorDefinition.html">Defining new indicators</a></li>
    <li><a class="dropdown-item" href="../articles/IndicatorEstimation.html">Indicator estimation procedures</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/emf-creaf/forestindicators/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Indicator estimation procedures</h1>
                        <h4 data-toc-skip class="author">Miquel De
Cáceres / Núria Aquilué</h4>
            
            <h4 data-toc-skip class="date">2025-11-24</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/emf-creaf/forestindicators/blob/HEAD/vignettes/IndicatorEstimation.Rmd" class="external-link"><code>vignettes/IndicatorEstimation.Rmd</code></a></small>
      <div class="d-none name"><code>IndicatorEstimation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In this vignette, you will learn:</p>
<ol style="list-style-type: decimal">
<li>How to format your data for indicator estimation.</li>
<li>How to discover which indicator functions are available, their data
requirements and additional parameters.</li>
<li>How to perform the estimation of multiple indicators at once.</li>
</ol>
</div>
<div class="section level2">
<h2 id="data-frame-inputs">Data frame inputs<a class="anchor" aria-label="anchor" href="#data-frame-inputs"></a>
</h2>
<p>Data inputs for the estimation of indicators are data frames. Not all
indicators require the same inputs, and the data frames can be of four
different kinds, depending on:</p>
<ul>
<li>Whether they describe <em>stand-level</em> vs. <em>plant-level</em>
data</li>
<li>Whether they contain <em>static</em> vs. <em>dynamic</em> data</li>
</ul>
<p>The following subsections provide examples of the four different data
frames. A single indicator may only need data of one kind
(e.g. plant-level dynamic data), but when calculating several indicators
at once, one may end-up supplying more than one data frame.</p>
<div class="section level3">
<h3 id="stand-level-static-data">Stand-level static data<a class="anchor" aria-label="anchor" href="#stand-level-static-data"></a>
</h3>
<p>This data frame contains <strong>STAND-level</strong> information
that <strong>DOES NOT change through time</strong>, such as topographic
features, the area represented, etc.</p>
<p>The actual columns will depend on the indicator to be calculated, but
at least a column <code>id_stand</code> (character) should be defined to
identify stands. An example of stand-level static data frame is the
following:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_stand_static_input</span></span>
<span><span class="co">#&gt;   id_stand  area slope_degree</span></span>
<span><span class="co">#&gt; 1   080001 662.3          3.5</span></span>
<span><span class="co">#&gt; 2   080002 329.3          0.9</span></span>
<span><span class="co">#&gt; 3   080003 565.7          3.2</span></span>
<span><span class="co">#&gt; 4   080004 161.2          7.4</span></span>
<span><span class="co">#&gt; 5   080005 589.7          7.9</span></span>
<span><span class="co">#&gt; 6   080006 461.2          7.3</span></span>
<span><span class="co">#&gt; 7   080007 589.5          1.6</span></span>
<span><span class="co">#&gt; 8   080008 428.3          1.6</span></span>
<span><span class="co">#&gt; 9   080009 580.2          3.1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="stand-level-dynamic-data">Stand-level dynamic data<a class="anchor" aria-label="anchor" href="#stand-level-dynamic-data"></a>
</h3>
<p>This data frame contains <strong>STAND-level</strong> information
that <strong>DOES change through time</strong>, such as temperature,
precipitation, the stand leaf area index, canopy cover, etc.</p>
<p>The actual columns will depend on the indicator to be calculated, but
at least columns <code>id_stand</code> (character) and <code>date</code>
(Date) should be defined to identify stands and time points,
respectively. An example of stand-level dynamic data frame is the
following:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_stand_dynamic_input</span></span>
<span><span class="co">#&gt;    id_stand       date mean_precipitation canopy_cover</span></span>
<span><span class="co">#&gt; 1    080001 2025-01-01              541.0         62.8</span></span>
<span><span class="co">#&gt; 2    080002 2025-01-01              750.6          0.9</span></span>
<span><span class="co">#&gt; 3    080003 2025-01-01              173.5         21.0</span></span>
<span><span class="co">#&gt; 4    080004 2025-01-01               71.7         62.5</span></span>
<span><span class="co">#&gt; 5    080005 2025-01-01              755.7          2.5</span></span>
<span><span class="co">#&gt; 6    080006 2025-01-01              464.0         12.1</span></span>
<span><span class="co">#&gt; 7    080007 2025-01-01              219.7         51.9</span></span>
<span><span class="co">#&gt; 8    080008 2025-01-01              649.8         37.2</span></span>
<span><span class="co">#&gt; 9    080009 2025-01-01              351.4         50.8</span></span>
<span><span class="co">#&gt; 10   080001 2025-02-01              134.2         17.3</span></span>
<span><span class="co">#&gt; 11   080002 2025-02-01              870.5         69.2</span></span>
<span><span class="co">#&gt; 12   080003 2025-02-01               30.2         78.0</span></span>
<span><span class="co">#&gt; 13   080004 2025-02-01              417.5         41.3</span></span>
<span><span class="co">#&gt; 14   080005 2025-02-01               13.5          1.2</span></span>
<span><span class="co">#&gt; 15   080006 2025-02-01              655.9         19.8</span></span>
<span><span class="co">#&gt; 16   080007 2025-02-01              231.4         83.0</span></span>
<span><span class="co">#&gt; 17   080008 2025-02-01                9.3         16.8</span></span>
<span><span class="co">#&gt; 18   080009 2025-02-01              113.0         61.2</span></span>
<span><span class="co">#&gt; 19   080001 2025-03-01              547.0         66.5</span></span>
<span><span class="co">#&gt; 20   080002 2025-03-01              252.4         74.7</span></span>
<span><span class="co">#&gt; 21   080003 2025-03-01              635.1         19.0</span></span>
<span><span class="co">#&gt; 22   080004 2025-03-01              429.0         10.1</span></span>
<span><span class="co">#&gt; 23   080005 2025-03-01              547.3         11.8</span></span>
<span><span class="co">#&gt; 24   080006 2025-03-01              353.1         56.1</span></span>
<span><span class="co">#&gt; 25   080007 2025-03-01              362.2         44.4</span></span>
<span><span class="co">#&gt; 26   080008 2025-03-01              442.3         84.2</span></span>
<span><span class="co">#&gt; 27   080009 2025-03-01              373.7         14.3</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plant-level-static-data">Plant-level static data<a class="anchor" aria-label="anchor" href="#plant-level-static-data"></a>
</h3>
<p>This data frame contains <strong>PLANT-level</strong> information
that <strong>DOES NOT change through time</strong>, such as taxonomy,
traits, etc.</p>
<p>The actual columns will depend on the indicator to be calculated, but
at least a columns <code>id_stand</code> (character) and
<code>plant_entity</code> (character) should be defined to identify
stands and plants, respectively. An example of plant-level static data
frame is the following:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_plant_static_input</span></span>
<span><span class="co">#&gt;    id_stand     plant_entity beautiness</span></span>
<span><span class="co">#&gt; 1    080001 Pinus halepensis       0.00</span></span>
<span><span class="co">#&gt; 2    080002 Pinus halepensis       0.22</span></span>
<span><span class="co">#&gt; 3    080003 Pinus sylvestris       0.13</span></span>
<span><span class="co">#&gt; 4    080004 Pinus sylvestris       0.07</span></span>
<span><span class="co">#&gt; 5    080005     Quercus ilex       0.18</span></span>
<span><span class="co">#&gt; 6    080006     Quercus ilex       0.14</span></span>
<span><span class="co">#&gt; 7    080007     Quercus ilex       0.01</span></span>
<span><span class="co">#&gt; 8    080008    Quercus suber       0.47</span></span>
<span><span class="co">#&gt; 9    080009    Quercus suber       0.54</span></span>
<span><span class="co">#&gt; 10   080001      Pinus nigra       0.43</span></span>
<span><span class="co">#&gt; 11   080002      Pinus nigra       0.05</span></span>
<span><span class="co">#&gt; 12   080005 Pinus halepensis       0.53</span></span>
<span><span class="co">#&gt; 13   080006 Pinus halepensis       0.09</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plant-level-dynamic-data">Plant-level dynamic data<a class="anchor" aria-label="anchor" href="#plant-level-dynamic-data"></a>
</h3>
<p>This data frame contains <strong>PLANT-level</strong> information
that <strong>DOES change through time</strong>, such as dbh, height,
cover, etc.</p>
<p>The actual columns will depend on the indicator to be calculated, but
at least a columns <code>id_stand</code> (character),
<code>plant_entity</code> (character) and <code>date</code> (Date)
should be defined to identify stands and plants, respectively. An
example of plant-level dynamic data frame is the following:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_plant_dynamic_input</span></span>
<span><span class="co">#&gt;    id_stand     plant_entity       date state  dbh    h   n</span></span>
<span><span class="co">#&gt; 1    080001 Pinus halepensis 2023-01-01  live 52.0 17.9  62</span></span>
<span><span class="co">#&gt; 2    080001 Pinus halepensis 2023-01-01  live  9.1 16.5 604</span></span>
<span><span class="co">#&gt; 3    080001      Pinus nigra 2023-01-01  live 39.8  5.9 654</span></span>
<span><span class="co">#&gt; 4    080001      Pinus nigra 2023-01-01  live  7.0  8.2 334</span></span>
<span><span class="co">#&gt; 5    080001      Pinus nigra 2023-01-01  live 25.0 20.9 168</span></span>
<span><span class="co">#&gt; 6    080001 Pinus halepensis 2024-01-01  live 19.6  4.5 529</span></span>
<span><span class="co">#&gt; 7    080001 Pinus halepensis 2024-01-01  live 40.1 21.2 634</span></span>
<span><span class="co">#&gt; 8    080001      Pinus nigra 2024-01-01  live 12.9  6.9 313</span></span>
<span><span class="co">#&gt; 9    080001      Pinus nigra 2024-01-01  live 19.6  4.0 372</span></span>
<span><span class="co">#&gt; 10   080001      Pinus nigra 2024-01-01  live 46.8 13.1  43</span></span>
<span><span class="co">#&gt; 11   080001 Pinus halepensis 2025-01-01  live 33.1  4.7 327</span></span>
<span><span class="co">#&gt; 12   080001 Pinus halepensis 2025-01-01  live 25.0 19.0 793</span></span>
<span><span class="co">#&gt; 13   080001      Pinus nigra 2025-01-01  live 41.2 14.8  42</span></span>
<span><span class="co">#&gt; 14   080001      Pinus nigra 2025-01-01  live 51.9  7.7 189</span></span>
<span><span class="co">#&gt; 15   080001      Pinus nigra 2025-01-01  live 35.8 14.0 558</span></span>
<span><span class="co">#&gt; 16   080005     Quercus ilex 2023-01-01  live 51.2 13.6 655</span></span>
<span><span class="co">#&gt; 17   080005     Quercus ilex 2023-01-01  live 32.5 11.2 303</span></span>
<span><span class="co">#&gt; 18   080005 Pinus halepensis 2023-01-01  live  9.5  3.3 353</span></span>
<span><span class="co">#&gt; 19   080005     Quercus ilex 2024-01-01  live 12.4 22.1 241</span></span>
<span><span class="co">#&gt; 20   080005     Quercus ilex 2024-01-01  live 21.8 11.4 322</span></span>
<span><span class="co">#&gt; 21   080005 Pinus halepensis 2024-01-01  live 36.4 15.5  90</span></span>
<span><span class="co">#&gt; 22   080005     Quercus ilex 2025-01-01  live 33.6  8.6 257</span></span>
<span><span class="co">#&gt; 23   080005     Quercus ilex 2025-01-01  live 21.8 11.9 224</span></span>
<span><span class="co">#&gt; 24   080005 Pinus halepensis 2025-01-01  live 49.2 21.6 841</span></span>
<span><span class="co">#&gt; 25   080005 Pinus halepensis 2025-01-01  live 31.5 17.7 627</span></span>
<span><span class="co">#&gt; 26   080001 Pinus halepensis 2023-01-01   cut 43.6  3.6 112</span></span>
<span><span class="co">#&gt; 27   080001 Pinus halepensis 2023-01-01   cut 54.6 17.0  96</span></span>
<span><span class="co">#&gt; 28   080001      Pinus nigra 2023-01-01   cut 25.7  4.7  17</span></span>
<span><span class="co">#&gt; 29   080001 Pinus halepensis 2024-01-01   cut 40.9 12.1  37</span></span>
<span><span class="co">#&gt; 30   080001      Pinus nigra 2025-01-01   cut 36.0 14.4 193</span></span>
<span><span class="co">#&gt; 31   080005     Quercus ilex 2023-01-01   cut 36.0 15.4 118</span></span>
<span><span class="co">#&gt; 32   080005 Pinus halepensis 2023-01-01   cut 38.6 11.6 178</span></span>
<span><span class="co">#&gt; 33   080005     Quercus ilex 2024-01-01   cut  9.7  4.9  47</span></span>
<span><span class="co">#&gt; 34   080005 Pinus halepensis 2025-01-01   cut 50.4 15.5 143</span></span>
<span><span class="co">#&gt; 35   080001 Pinus halepensis 2025-01-01  dead 47.1 13.3   8</span></span>
<span><span class="co">#&gt; 36   080001      Pinus nigra 2025-01-01  dead 48.6  0.2  90</span></span>
<span><span class="co">#&gt; 37   080001      Pinus nigra 2025-01-01  dead 37.5 17.8  45</span></span>
<span><span class="co">#&gt; 38   080001      Pinus nigra 2025-01-01  dead 21.6 13.7  57</span></span>
<span><span class="co">#&gt; 39   080005     Quercus ilex 2023-01-01  dead 42.2  1.8  47</span></span>
<span><span class="co">#&gt; 40   080005     Quercus ilex 2023-01-01  dead  6.4 17.6  96</span></span>
<span><span class="co">#&gt; 41   080005 Pinus halepensis 2023-01-01  dead 15.6  7.4  19</span></span>
<span><span class="co">#&gt; 42   080005 Pinus halepensis 2024-01-01  dead 24.6 10.2  71</span></span>
<span><span class="co">#&gt; 43   080005     Quercus ilex 2025-03-01  dead 19.8 16.9  89</span></span>
<span><span class="co">#&gt; 44   080005     Quercus ilex 2025-01-01  dead 10.3 13.1  95</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="indicators">Indicators<a class="anchor" aria-label="anchor" href="#indicators"></a>
</h2>
<div class="section level3">
<h3 id="indicator-definition-table">Indicator definition table<a class="anchor" aria-label="anchor" href="#indicator-definition-table"></a>
</h3>
<p>All the information regarding which indicators are included in the
package and their requirements can be found in the data table
<code>indicator_definition</code>. For each indicator, it includes:</p>
<ul>
<li>Indicator name</li>
<li>Method of estimation</li>
<li>Interpretation</li>
<li>Output units</li>
<li>Person responsible of its implementation in the package, who is to
be contacted in case of issues/doubts.</li>
<li>Variable names required for its estimation (grouped by input data
frame)</li>
</ul>
</div>
<div class="section level3">
<h3 id="variable-definition-table">Variable definition table<a class="anchor" aria-label="anchor" href="#variable-definition-table"></a>
</h3>
<p>The type and units of all input variables can be found in table
<code>variable_definition</code>.</p>
</div>
<div class="section level3">
<h3 id="indicator-functions">Indicator functions<a class="anchor" aria-label="anchor" href="#indicator-functions"></a>
</h3>
<p>Each indicator is implemented in the package as an <strong>internal
function</strong>, maintained by the responsible person. This functions
is not directly accessible to the user, but is called via
<code><a href="../reference/estimate_indicators.html">estimate_indicators()</a></code> (see below).</p>
</div>
<div class="section level3">
<h3 id="additional-parameters">Additional parameters<a class="anchor" aria-label="anchor" href="#additional-parameters"></a>
</h3>
<p>The estimation of indicators may require other information in
addition to the input data frame. Table
<code>additional_parameters</code> contains the description of
additional parameters for those functions that require them. The way
these parameters are specified is described below.</p>
</div>
</div>
<div class="section level2">
<h2 id="indicator-estimation-procedure">Indicator estimation procedure<a class="anchor" aria-label="anchor" href="#indicator-estimation-procedure"></a>
</h2>
<p>The general procedure for the estimation of forest indicators follows
three main steps, which we illustrate in the following subsections:</p>
<div class="section level3">
<h3 id="step-1-choose-target-indicators-and-examine-their-requirements">Step 1: Choose target indicators and examine their requirements<a class="anchor" aria-label="anchor" href="#step-1-choose-target-indicators-and-examine-their-requirements"></a>
</h3>
<p>The first step is to decide which indicators are to be estimated. The
list of all indicators is given in table
<code>indicator_definition</code>. Additionally, you can examine the
names of the indicators in the package that could be estimated with your
data by calling function <code><a href="../reference/available_indicators.html">available_indicators()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/available_indicators.html">available_indicators</a></span><span class="op">(</span>plant_dynamic_input <span class="op">=</span> <span class="va">example_plant_dynamic_input</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "cut_tree_basal_area"          "cut_tree_density"            </span></span>
<span><span class="co">#&gt;  [3] "dead_tree_basal_area"         "dead_tree_density"           </span></span>
<span><span class="co">#&gt;  [5] "density_dead_wood"            "dominant_tree_diameter"      </span></span>
<span><span class="co">#&gt;  [7] "dominant_tree_height"         "hart_becking_index"          </span></span>
<span><span class="co">#&gt;  [9] "live_tree_basal_area"         "live_tree_biomass_stock"     </span></span>
<span><span class="co">#&gt; [11] "live_tree_carbon_change_rate" "live_tree_carbon_stock"      </span></span>
<span><span class="co">#&gt; [13] "live_tree_density"            "live_tree_volume_stock"      </span></span>
<span><span class="co">#&gt; [15] "mean_tree_height"             "quadratic_mean_tree_diameter"</span></span>
<span><span class="co">#&gt; [17] "timber_harvest_carbon_rate"   "timber_harvest_volume"       </span></span>
<span><span class="co">#&gt; [19] "timber_harvest_volume_rate"</span></span></code></pre></div>
<p>Note that if variable names (or variable units) are incorrectly
specified, then the available indicator list may be shorter than
expected.</p>
<p>Say we decide to estimate the <em>timber harvest volume</em>
(i.e. indicator <code>"timber_harvest_volume"</code>) and the <em>basal
area of living trees</em> (i.e. indicator
<code>"live_tree_basal_area"</code>). We may need to check which data
inputs are required, their units, etc. We can find this information
using function <code><a href="../reference/show_information.html">show_information()</a></code>, for example:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/show_information.html">show_information</a></span><span class="op">(</span><span class="st">"timber_harvest_volume"</span><span class="op">)</span></span>
<span><span class="co">#&gt; A) DEFINITION</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    Name:  timber_harvest_volume </span></span>
<span><span class="co">#&gt;    Estimation:  Allometric volume relationships </span></span>
<span><span class="co">#&gt;    Interpretation:  Volume over bark of harvested wood </span></span>
<span><span class="co">#&gt;    Output units:  m3/ha </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; B) DATA INPUTS</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; B.1) Stand-level static data: &lt;NONE&gt;</span></span>
<span><span class="co">#&gt; B.2) Stand-level dynamic data: &lt;NONE&gt;</span></span>
<span><span class="co">#&gt; B.3) Plant-level static data: &lt;NONE&gt;</span></span>
<span><span class="co">#&gt; B.4) Plant-level dynamic data:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;      variable      type units</span></span>
<span><span class="co">#&gt;           dbh   numeric    cm</span></span>
<span><span class="co">#&gt;             h   numeric     m</span></span>
<span><span class="co">#&gt;             n   numeric  ha-1</span></span>
<span><span class="co">#&gt;  plant_entity character  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;         state character  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;                                                   description</span></span>
<span><span class="co">#&gt;                                     diameter at breast height</span></span>
<span><span class="co">#&gt;                                                        height</span></span>
<span><span class="co">#&gt;                                                       density</span></span>
<span><span class="co">#&gt;                   name or code? of the tree, shrub, … species</span></span>
<span><span class="co">#&gt;  state of the cohort, tree, … can be 'live', 'cut', or 'dead'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; C) ADDITIONAL PARAMETERS</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;         parameter default_value</span></span>
<span><span class="co">#&gt;      min_tree_dbh           7.5</span></span>
<span><span class="co">#&gt;      max_tree_dbh          &lt;NA&gt;</span></span>
<span><span class="co">#&gt;  targeted_species          &lt;NA&gt;</span></span>
<span><span class="co">#&gt;  excluded_species          &lt;NA&gt;</span></span>
<span><span class="co">#&gt;                                                                description</span></span>
<span><span class="co">#&gt;  Minimum  tree diameter to be included in the estimation of harvest volume</span></span>
<span><span class="co">#&gt;  Maximum  tree diameter to be included in the estimation of harvest volume</span></span>
<span><span class="co">#&gt;               Tree species included in the calculation of harvested volume</span></span>
<span><span class="co">#&gt;           Tree species not included in the calculation of harvested volume</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-2-assemble-inputs-and-define-values-for-additional-parameters">Step 2: Assemble inputs and define values for additional
parameters<a class="anchor" aria-label="anchor" href="#step-2-assemble-inputs-and-define-values-for-additional-parameters"></a>
</h3>
<p>Once the requested format and content of inputs is know, it is the
responsibility of the user to build the necessary data frames to be used
as inputs. Variable names and types should follow the guidelines of
<code><a href="../reference/show_information.html">show_information()</a></code>. Variable units can be specified using
package <strong>units</strong> (and in this case unit correspondence
will be checked), but they are not compulsory. In our case, we will use
<code>example_plant_dynamic_input</code> that already contains the
necessary data for the estimation of the two indicators.</p>
<p>We will normally need to define additional parameters to fine-tune
the estimation of indicators, For that, we define a <strong>named
list</strong> where each element corresponds to a different indicator
and, in turn, contains a named list of parameters. In our case:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>timber_harvest_volume <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>province <span class="op">=</span> <span class="fl">8</span><span class="op">)</span>,</span>
<span>               live_tree_basal_area <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min_tree_dbh <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-3-call-general-estimation-function">Step 3: Call general estimation function<a class="anchor" aria-label="anchor" href="#step-3-call-general-estimation-function"></a>
</h3>
<p>Once we have our inputs ready, the indicators are estimated by
calling function <code><a href="../reference/estimate_indicators.html">estimate_indicators()</a></code> as follows:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate_indicators.html">estimate_indicators</a></span><span class="op">(</span>indicators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"timber_harvest_volume"</span>, <span class="st">"live_tree_basal_area"</span><span class="op">)</span>,</span>
<span>                           plant_dynamic_input <span class="op">=</span> <span class="va">example_plant_dynamic_input</span>,</span>
<span>                           timber_volume_function <span class="op">=</span> <span class="fu">IFNallometry</span><span class="fu">::</span><span class="va"><a href="https://emf-creaf.github.io/IFNallometry/reference/IFNvolume_forestindicators.html" class="external-link">IFNvolume_forestindicators</a></span>,</span>
<span>                           additional_params <span class="op">=</span> <span class="va">params</span><span class="op">)</span></span></code></pre></div>
<p>Note that <code>"timber_harvest_volume"</code> requires specifying
the function to be used to calculate timber volumes,
i.e. <code>timber_volume_function</code>, for which in our case we use a
predefined function from package <a href="https://emf-creaf.github.io/IFNallometry/" class="external-link"><strong>IFNallometry</strong></a>.</p>
<p>The result of the estimation is the following:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   id_stand date       timber_harvest_volume live_tree_basal_area</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 080001   2023-01-01                153.                  108. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 080001   2024-01-01                 20.5                 119. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 080001   2025-01-01                126.                  169. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 080005   2023-01-01                138.                  162. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 080005   2024-01-01                  2.04                 24.3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 080005   2025-01-01                148.                  240.</span></span></code></pre></div>
<div class="section level4">
<h4 id="including-output-units">Including output units<a class="anchor" aria-label="anchor" href="#including-output-units"></a>
</h4>
<p>When calling <code>estimate_indicators</code>, we can force the
inclusion of indicator units in the output tibble:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/estimate_indicators.html">estimate_indicators</a></span><span class="op">(</span>indicators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"timber_harvest_volume"</span>, <span class="st">"live_tree_basal_area"</span><span class="op">)</span>,</span>
<span>                    plant_dynamic_input <span class="op">=</span> <span class="va">example_plant_dynamic_input</span>,</span>
<span>                    timber_volume_function <span class="op">=</span> <span class="fu">IFNallometry</span><span class="fu">::</span><span class="va"><a href="https://emf-creaf.github.io/IFNallometry/reference/IFNvolume_forestindicators.html" class="external-link">IFNvolume_forestindicators</a></span>,</span>
<span>                    additional_params <span class="op">=</span> <span class="va">params</span>,</span>
<span>                    include_units <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   id_stand date       timber_harvest_volume live_tree_basal_area</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                  <span style="color: #949494;">[m^3/ha]</span>             <span style="color: #949494;">[m^2/ha]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 080001   2023-01-01                153.                  108. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 080001   2024-01-01                 20.5                 119. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 080001   2025-01-01                126.                  169. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 080005   2023-01-01                138.                  162. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 080005   2024-01-01                  2.04                 24.3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 080005   2025-01-01                148.                  240.</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="indicator-state-vs--indicator-rates">Indicator state vs. indicator rates<a class="anchor" aria-label="anchor" href="#indicator-state-vs--indicator-rates"></a>
</h4>
<p>Some indicators refer to a quantity assessed at some point in time.
For example, <code>timber_harvest_volume</code> is the volume of
harvested trees assessed from <code>state == "cut"</code> in the input
data. We may be more interested in (annual) rates, which are estimated
by dividing a change in a given quantity (or harvest) by the difference
in time since the previous date with data. For example, we calculate
here <code>timber_harvest_volume_rate</code>, which returns values as
per year:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>timber_harvest_volume <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>province <span class="op">=</span> <span class="fl">8</span><span class="op">)</span>,</span>
<span>               timber_harvest_volume_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>province <span class="op">=</span> <span class="fl">8</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/estimate_indicators.html">estimate_indicators</a></span><span class="op">(</span>indicators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"timber_harvest_volume"</span>, <span class="st">"timber_harvest_volume_rate"</span><span class="op">)</span>,</span>
<span>                    plant_dynamic_input <span class="op">=</span> <span class="va">example_plant_dynamic_input</span>,</span>
<span>                    timber_volume_function <span class="op">=</span> <span class="fu">IFNallometry</span><span class="fu">::</span><span class="va"><a href="https://emf-creaf.github.io/IFNallometry/reference/IFNvolume_forestindicators.html" class="external-link">IFNvolume_forestindicators</a></span>,</span>
<span>                    additional_params <span class="op">=</span> <span class="va">params</span>,</span>
<span>                    include_units <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   id_stand date       timber_harvest_volume timber_harvest_volume_rate</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                  <span style="color: #949494;">[m^3/ha]</span>              <span style="color: #949494;">[m^3/(ha*yr)]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 080001   2023-01-01                153.                        <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 080001   2024-01-01                 20.5                       20.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 080001   2025-01-01                126.                       126.  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 080005   2023-01-01                138.                        <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 080005   2024-01-01                  2.04                       2.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 080005   2025-01-01                148.                       148.</span></span></code></pre></div>
<p>Note that volume rates for the first survey are missing, because we
cannot know how much time passed since the previous survey. Moreover,
the remaining values are not exactly the same, because the rate is
calculated by assessing the number of days elapsed and transforming them
into years using a factor of 365.25.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="real-example-with-data-from-package-forestables">Real example with data from package forestables<a class="anchor" aria-label="anchor" href="#real-example-with-data-from-package-forestables"></a>
</h2>
<p>Let us now present a more real example case. We will use forest
inventory example data generated from package <a href="https://emf-creaf.github.io/forestables/" class="external-link"><strong>forestables</strong></a>.
This data set includes data for forest plots in Barcelona province in
three Spanish forest inventory surveys (IFN2, IFN3 and IFN4):</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://emf-creaf.github.io/forestables/" class="external-link">forestables</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: data.table</span></span>
<span><span class="co">#&gt; Loading required package: dtplyr</span></span>
<span><span class="va">ifn_output_example</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8,997 × 24</span></span></span>
<span><span class="co">#&gt;    id_unique_code    year plot  coordx coordy coord_sys   crs  elev aspect slope</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08_0001_NN_A1_A1  <span style="text-decoration: underline;">1</span>990 0001  <span style="text-decoration: underline;">402</span>000 4.68<span style="color: #949494;">e</span>6 ED50      <span style="text-decoration: underline;">23</span>031  <span style="text-decoration: underline;">1</span>900     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08_0002_NN_A1_A1  <span style="text-decoration: underline;">1</span>990 0002  <span style="text-decoration: underline;">400</span>000 4.68<span style="color: #949494;">e</span>6 ED50      <span style="text-decoration: underline;">23</span>031  <span style="text-decoration: underline;">1</span>700     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08_0003_NN_A1_A1  <span style="text-decoration: underline;">1</span>990 0003  <span style="text-decoration: underline;">401</span>000 4.68<span style="color: #949494;">e</span>6 ED50      <span style="text-decoration: underline;">23</span>031  <span style="text-decoration: underline;">1</span>700     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08_0004_NN_A1_A1  <span style="text-decoration: underline;">1</span>990 0004  <span style="text-decoration: underline;">402</span>000 4.68<span style="color: #949494;">e</span>6 ED50      <span style="text-decoration: underline;">23</span>031  <span style="text-decoration: underline;">1</span>400     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08_0005_NN_A1_A1  <span style="text-decoration: underline;">1</span>990 0005  <span style="text-decoration: underline;">400</span>000 4.68<span style="color: #949494;">e</span>6 ED50      <span style="text-decoration: underline;">23</span>031  <span style="text-decoration: underline;">1</span>300     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08_0006_NN_A1_A1  <span style="text-decoration: underline;">1</span>990 0006  <span style="text-decoration: underline;">397</span>000 4.68<span style="color: #949494;">e</span>6 ED50      <span style="text-decoration: underline;">23</span>031  <span style="text-decoration: underline;">1</span>700     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08_0007_NN_A1_xx  <span style="text-decoration: underline;">1</span>990 0007  <span style="text-decoration: underline;">399</span>000 4.68<span style="color: #949494;">e</span>6 ED50      <span style="text-decoration: underline;">23</span>031  <span style="text-decoration: underline;">1</span>400     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08_0008_NN_A1_xx  <span style="text-decoration: underline;">1</span>990 0008  <span style="text-decoration: underline;">401</span>000 4.68<span style="color: #949494;">e</span>6 ED50      <span style="text-decoration: underline;">23</span>031  <span style="text-decoration: underline;">1</span>100     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08_0009_NN_A1_xx  <span style="text-decoration: underline;">1</span>990 0009  <span style="text-decoration: underline;">402</span>000 4.68<span style="color: #949494;">e</span>6 ED50      <span style="text-decoration: underline;">23</span>031  <span style="text-decoration: underline;">1</span>100     52    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08_0010_NN_A1_xx  <span style="text-decoration: underline;">1</span>990 0010  <span style="text-decoration: underline;">394</span>000 4.68<span style="color: #949494;">e</span>6 ED50      <span style="text-decoration: underline;">23</span>031  <span style="text-decoration: underline;">1</span>500     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8,987 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 14 more variables: country &lt;chr&gt;, version &lt;chr&gt;, class &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   subclass &lt;chr&gt;, province_code &lt;chr&gt;, province_name_original &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ca_name_original &lt;chr&gt;, sheet_ntm &lt;chr&gt;, huso &lt;dbl&gt;, slope_mean &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   type &lt;int&gt;, tree &lt;list&gt;, understory &lt;list&gt;, regen &lt;list&gt;</span></span></span></code></pre></div>
<div class="section level3">
<h3 id="reshaping-data-for-forestindicators">Reshaping data for forestindicators<a class="anchor" aria-label="anchor" href="#reshaping-data-for-forestindicators"></a>
</h3>
<p>A wrapper function, called
<code><a href="../reference/forestables2forestindicators.html">forestables2forestindicators()</a></code> has been included to
transform <strong>forestables</strong> output objects into data frames
suitable for <strong>forestindicators</strong>. We start by reshaping
data from IFN2:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x_ifn2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/forestables2forestindicators.html">forestables2forestindicators</a></span><span class="op">(</span><span class="va">ifn_output_example</span>, version <span class="op">=</span> <span class="st">"ifn2"</span><span class="op">)</span></span>
<span><span class="va">x_ifn2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 47,480 × 10</span></span></span>
<span><span class="co">#&gt;    id_stand       date       province plant_entity     n   dbh     h cubing_form</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08_0001_NN_A1… 1990-01-01        8 Pinus uncin…  31.8  18.9   7.5 2          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08_0001_NN_A1… 1990-01-01        8 Pinus uncin…  14.1  29.2   7.5 2          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08_0001_NN_A1… 1990-01-01        8 Pinus uncin…  14.1  23.9   9.5 2          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08_0001_NN_A1… 1990-01-01        8 Pinus uncin…  14.1  23.7   7   5          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08_0001_NN_A1… 1990-01-01        8 Pinus uncin…  14.1  32.7   8   2          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08_0001_NN_A1… 1990-01-01        8 Pinus uncin…  31.8  13.7   8   2          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08_0001_NN_A1… 1990-01-01        8 Pinus uncin…  31.8  15.7   8   2          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08_0001_NN_A1… 1990-01-01        8 Pinus uncin… 127.    7.7   4.5 3          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08_0001_NN_A1… 1990-01-01        8 Pinus uncin…  14.1  26.1  10   2          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08_0001_NN_A1… 1990-01-01        8 Pinus uncin…  31.8  20.3   9   2          </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 47,470 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: quality_wood &lt;chr&gt;, state &lt;chr&gt;</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="estimating-indicators-for-a-single-inventory-survey">Estimating indicators for a single inventory survey<a class="anchor" aria-label="anchor" href="#estimating-indicators-for-a-single-inventory-survey"></a>
</h3>
<p>We now determine the indicators that can be evaluated with this data
set:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/available_indicators.html">available_indicators</a></span><span class="op">(</span>plant_dynamic_input <span class="op">=</span> <span class="va">x_ifn2</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "cut_tree_basal_area"          "cut_tree_density"            </span></span>
<span><span class="co">#&gt;  [3] "dead_tree_basal_area"         "dead_tree_density"           </span></span>
<span><span class="co">#&gt;  [5] "density_dead_wood"            "dominant_tree_diameter"      </span></span>
<span><span class="co">#&gt;  [7] "dominant_tree_height"         "hart_becking_index"          </span></span>
<span><span class="co">#&gt;  [9] "live_tree_basal_area"         "live_tree_biomass_stock"     </span></span>
<span><span class="co">#&gt; [11] "live_tree_carbon_change_rate" "live_tree_carbon_stock"      </span></span>
<span><span class="co">#&gt; [13] "live_tree_density"            "live_tree_volume_stock"      </span></span>
<span><span class="co">#&gt; [15] "mean_tree_height"             "quadratic_mean_tree_diameter"</span></span>
<span><span class="co">#&gt; [17] "timber_harvest_carbon_rate"   "timber_harvest_volume"       </span></span>
<span><span class="co">#&gt; [19] "timber_harvest_volume_rate"</span></span></code></pre></div>
<p>And finally make a call to <code><a href="../reference/estimate_indicators.html">estimate_indicators()</a></code> with
the desired indicators:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/estimate_indicators.html">estimate_indicators</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"live_tree_density"</span>, </span>
<span>                      <span class="st">"live_tree_basal_area"</span>,</span>
<span>                      <span class="st">"mean_tree_height"</span>,</span>
<span>                      <span class="st">"dominant_tree_height"</span>, </span>
<span>                      <span class="st">"dominant_tree_diameter"</span>,</span>
<span>                      <span class="st">"quadratic_mean_tree_diameter"</span>,</span>
<span>                      <span class="st">"hart_becking_index"</span><span class="op">)</span>, </span>
<span>                    plant_dynamic_input <span class="op">=</span> <span class="va">x_ifn2</span>, </span>
<span>                    include_units <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,972 × 9</span></span></span>
<span><span class="co">#&gt;    id_stand   date       live_tree_density live_tree_basal_area mean_tree_height</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                <span style="color: #949494;">[1/ha]</span>             <span style="color: #949494;">[m^2/ha]</span>              <span style="color: #949494;">[m]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08_0001_N… 1990-01-01              460.                12.9              7.32</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08_0002_N… 1990-01-01              230.                16.9             11.0 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08_0003_N… 1990-01-01              221.                 5.82             6.33</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08_0004_N… 1990-01-01              138.                 4.64             8.09</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08_0005_N… 1990-01-01              391.                12.1              8.11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08_0006_N… 1990-01-01              351.                25.2             10.3 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08_0007_N… 1990-01-01              807.                34.4              9.81</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08_0008_N… 1990-01-01              446.                 6.27             5.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08_0009_N… 1990-01-01             <span style="text-decoration: underline;">1</span>107.                15.0              5.78</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08_0010_N… 1990-01-01              532.                15.7              8.95</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2,962 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4 more variables: dominant_tree_height [m], dominant_tree_diameter [cm],</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   quadratic_mean_tree_diameter [cm], hart_becking_index [%]</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="estimating-change-rates-between-inventory-surveys">Estimating change rates between inventory surveys<a class="anchor" aria-label="anchor" href="#estimating-change-rates-between-inventory-surveys"></a>
</h3>
<p>Here we illustrate the calculation of rates in carbon stock of living
trees, between two consecutive forest inventories: IFN2-IFN3. We first
reshape IFN3 as we did with IFN2:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x_ifn3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/forestables2forestindicators.html">forestables2forestindicators</a></span><span class="op">(</span><span class="va">ifn_output_example</span>, version <span class="op">=</span> <span class="st">"ifn3"</span><span class="op">)</span></span></code></pre></div>
<p>We then filter common forest plots and merge the result into a single
data frame:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x_ifn2_filt</span> <span class="op">&lt;-</span> <span class="va">x_ifn2</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">id_stand</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">x_ifn3</span><span class="op">$</span><span class="va">id_stand</span><span class="op">)</span></span>
<span><span class="va">x_ifn3_filt</span> <span class="op">&lt;-</span> <span class="va">x_ifn3</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">id_stand</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">x_ifn2</span><span class="op">$</span><span class="va">id_stand</span><span class="op">)</span></span>
<span><span class="va">x_ifn23</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">x_ifn2_filt</span>, <span class="va">x_ifn3_filt</span><span class="op">)</span></span></code></pre></div>
<p>Finally, we can use <code><a href="../reference/estimate_indicators.html">estimate_indicators()</a></code> to estimate
carbon stocks in IFN2 and IFN3, as well as the rates of biomass change
due to changes in living stock:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/estimate_indicators.html">estimate_indicators</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"live_tree_carbon_stock"</span>,</span>
<span>                      <span class="st">"live_tree_carbon_change_rate"</span><span class="op">)</span>, </span>
<span>                    plant_dynamic_input <span class="op">=</span> <span class="va">x_ifn23</span>, </span>
<span>                    plant_biomass_function <span class="op">=</span> <span class="fu">IFNallometry</span><span class="fu">::</span><span class="va"><a href="https://emf-creaf.github.io/IFNallometry/reference/IFNbiomass_forestindicators.html" class="external-link">IFNbiomass_forestindicators</a></span>,</span>
<span>                    timber_volume_function <span class="op">=</span> <span class="fu">IFNallometry</span><span class="fu">::</span><span class="va"><a href="https://emf-creaf.github.io/IFNallometry/reference/IFNvolume_forestindicators.html" class="external-link">IFNvolume_forestindicators</a></span>,</span>
<span>                    include_units <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> 48 negative stem biomass values truncated to zero for taxon 41 with model 1.</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> 3 negative stem biomass values truncated to zero for taxon 41 with model 1.</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> 48 negative stem biomass values truncated to zero for taxon 41 with model 1.</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> 3 negative stem biomass values truncated to zero for taxon 41 with model 1.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5,249 × 4</span></span></span>
<span><span class="co">#&gt;    id_stand         date       live_tree_carbon_stock live_tree_carbon_change_…¹</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                     <span style="color: #949494;">[t/ha]</span>                <span style="color: #949494;">[t/(ha*yr)]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08_0001_NN_A1_A1 1990-01-01                  148.                      <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08_0001_NN_A1_A1 2001-01-01                  245.                       8.83 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08_0002_NN_A1_A1 1990-01-01                  187.                      <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08_0002_NN_A1_A1 2001-01-01                  193.                       0.553</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08_0003_NN_A1_A1 1990-01-01                   64.4                     <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08_0003_NN_A1_A1 2001-01-01                  155.                       8.20 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08_0004_NN_A1_A1 1990-01-01                   43.2                     <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08_0004_NN_A1_A1 2001-01-01                   25.3                     -<span style="color: #BB0000;">1.63</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08_0005_NN_A1_A1 1990-01-01                  177.                      <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08_0005_NN_A1_A1 2001-01-01                  225.                       4.35 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5,239 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated name: ¹​live_tree_carbon_change_rate</span></span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Miquel De Cáceres, Núria Aquilué.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
